<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="AppUserInfo">

	<select id="getAppUserInfo" resultClass="com.godoing.rose.lang.DataMap"
		parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		SELECT * FROM appuserinfo
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="condition">
				$condition$
			</isNotEmpty>
		</dynamic>
	</select>
	
	<select id="getProjectImageInfo" resultClass="com.godoing.rose.lang.DataMap"
		parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		SELECT * FROM projectimage
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="condition">
				$condition$
			</isNotEmpty>
		</dynamic>
	</select>
	
	<select id="getUserPhotoInfo" resultClass="com.godoing.rose.lang.DataMap"
		parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		SELECT * FROM photo_info
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="condition">
				$condition$
			</isNotEmpty>
		</dynamic>
	</select>

	<select id="getAppUserInfoListByVo" resultClass="com.godoing.rose.lang.DataMap"
		parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		SELECT * FROM appuserinfo
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="condition">
				$condition$
			</isNotEmpty>
		</dynamic>
		
		<dynamic prepend="order by">
			<isNotEmpty prepend="order by" property="orderBy">
				$orderBy$
			</isNotEmpty>
		</dynamic>
		limit
		<isNotEmpty prepend=" " property="from">
			$from$
		</isNotEmpty>
		,
		<isNotEmpty prepend=" " property="pageSize">
			$pageSize$
		</isNotEmpty>
	</select>

	<select id="getAppUserInfoCount" resultClass="java.lang.Integer"
		parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		SELECT COUNT(*) FROM appuserinfo
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="condition">
				$condition$
			</isNotEmpty>
		</dynamic>
	</select>

	<select id="getAppUserInfoCountByVo" resultClass="java.lang.Integer"
		parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		SELECT COUNT(*) FROM appuserinfo 
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="condition">
				$condition$
			</isNotEmpty>
		</dynamic>
	</select>

	<insert id="insertAppUserInfo" parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		INSERT INTO
		appuserinfo(create_time,user_name,first_name,nick_name,password,last_name,email,update_time,token)
		VALUES
		(#createTime#,#userName#,#first_name#,#nickName#,#password#,#last_name#,#email#,#update_time#,#token#)
	</insert>
	
	
	
	<insert id="insertSaoMaInfo" parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		INSERT INTO
		saomainfo(create_time,user_name,nick_name,password,last_name)
		VALUES
		(#createTime#,#userName#,#nickName#,#password#,#last_name#)
	</insert>
	
	<insert id="insertUserPhotoInfo" parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		INSERT INTO
		photo_info(user_name,nick_name,update_time,belong_project,photo_href,photo_name,shuo_ming,head2,head3,head4,head5,head6)
		VALUES
		(#userName#,#nickName#,#createTime#,#belongProject#,#head#,#photoName#,#shuoMing#,#head2#,#head3#,#head4#,#head5#,#head6#)
	</insert>

	<update id="updateAppUserInfo" parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		UPDATE appuserinfo
		<dynamic prepend="set">
			<isNotEmpty prepend="," property="createTime">
				create_time=#createTime#
			</isNotEmpty>
			<isNotEmpty prepend="," property="userName">
				user_name=#userName#
			</isNotEmpty>
        	<isNotEmpty prepend="," property="first_name">
				first_name=#first_name#
			</isNotEmpty>
				<isNotEmpty prepend="," property="nickName">
				nick_name=#nickName#
			</isNotEmpty>
				<isNotEmpty prepend="," property="password">
				password=#password#
			</isNotEmpty>
				<isNotEmpty prepend="," property="last_name">
				last_name=#last_name#
			</isNotEmpty>
				<isNotEmpty prepend="," property="email">
				email=#email#
			</isNotEmpty>
				<isNotEmpty prepend="," property="update_time">
				update_time=#update_time#
			</isNotEmpty>
				<isNotEmpty prepend="," property="token">
				token=#token#
			</isNotEmpty>
		</dynamic>
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="condition">
				$condition$
			</isNotEmpty>
		</dynamic>
	</update>

	<select id="getAppUserInfoGroupByTime" resultClass="com.godoing.rose.lang.DataMap"
		parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		SELECT COUNT(id) AS id,create_time FROM appuserinfo
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="condition">
				$condition$
			</isNotEmpty>
		</dynamic>
		GROUP BY SUBSTRING(create_time,1,10)
		<dynamic prepend="order by">
			<isNotEmpty prepend="order by" property="orderBy">
				$orderBy$
			</isNotEmpty>
		</dynamic>
		limit
		<isNotEmpty prepend=" " property="from">
			$from$
		</isNotEmpty>
		,
		<isNotEmpty prepend=" " property="pageSize">
			$pageSize$
		</isNotEmpty>
	</select>

	<select id="getAppUserInfoCountGroupByTime" resultClass="java.lang.Integer"
		parameterClass="com.care.sys.appuserinfo.domain.AppUserInfo">
		SELECT COUNT(DISTINCT(SUBSTRING(create_time,1,10))) FROM appuserinfo
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="condition">
				$condition$
			</isNotEmpty>
		</dynamic>
	</select>

</sqlMap>